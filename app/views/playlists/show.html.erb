<div class="container mx-auto">
  <% if @playlist.songs.size == 10 %>
    <h1 class="text-3xl text-center font-bold mb-4">
      Your <%= @playlist.character %> + <%= @playlist.genre %>, AI generated playlist
    </h1>
    <div class="border rounded-md px-4 py-2 mb-8">
      <ol class="list-decimal list-inside">
        <% @playlist.songs.each do |song| %>
          <li class="mb-2"><%= "#{song.name}, by #{song.artists.first.name}" %></li>
        <% end %>
      </ol>
    </div>

<div class="text-center">
  <% if current_user %>
    <%= link_to "Open with Spotify", open_with_spotify_playlist_path(@playlist), class: "btn btn-primary rounded-md text-lg", data: { turbo: false }, target: "_blank", style: "background-color: #10B981; border: none; padding: 12px 24px; color: white;" %>
  <% end %>
</div>

    <h2 class="text-xl font-bold mt-8 mb-2">Don't like what you see? Remix your playlist</h2>
  <% else %>
    <h2 class="text-2xl font-bold mb-4">We're sorry, OpenAi didn't like something about that last prompt. Please try again below.</h2>
  <% end %>


<div class="grid grid-cols-2 gap-4">
  <%= form_with url: playlists_path, method: :post, class: "mt-8" do |form| %>
    <div class="mb-4">
      <%= form.label :query, class: "block font-medium text-gray-700" do %>
        Genre:
      <% end %>
      <%= form.text_field :query, class: "playlist-genre-form-input form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm", id: "genre-field" %>

    <label for="character_select" class="block font-medium text-gray-700 mb-2">
      Character:
    </label>
      <select id="character_select" name="remix_character" class="form-select mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
        <% @characters.each do |character| %>
          <option value="<%=character.character_id%>"><%= character.name %></option>
        <% end %>
        <div class="w-full">
          <%= form.submit "Create Playlist", class: "bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" %>
        </div>
      <% end %>
    </select>
  </div>
</div>




